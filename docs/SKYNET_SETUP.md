# SKYNET MODE Setup Guide

> **Complete setup for unattended 8-10 hour autonomous AI sessions**

## Quick Setup

```bash
# Full SKYNET MODE setup in one command
forge-protocol init --type rust --skynet

# This creates:
# ✓ warmup.yaml      - Protocol with self-healing
# ✓ sprint.yaml      - Session boundaries
# ✓ roadmap.yaml     - Milestone planning
# ✓ CLAUDE.md        - Auto-loaded config
# ✓ .hooks/          - Pre-commit hooks (or cargo-husky for Rust)
# ✓ .gitignore       - Updated with checkpoint file
```

## Requirements

### AI Tool Requirements

| Requirement | Status |
|-------------|--------|
| Claude Code | Required |
| `--dangerously-skip-permissions` | Required for autonomy |
| File system access | ✓ (Claude Code has this) |
| CLAUDE.md auto-load | ✓ (Claude Code has this) |

See [Vendor Implementation Guide](VENDOR_IMPLEMENTATION.md) for other tools.

### Project Requirements

| Component | Purpose | Generated by |
|-----------|---------|--------------|
| `warmup.yaml` | Full protocol rules | `forge-protocol init` |
| `CLAUDE.md` | Auto-loaded bootstrap | `forge-protocol init --skynet` |
| Pre-commit hooks | Quality enforcement | `forge-protocol init --skynet` |
| `.gitignore` update | Exclude checkpoint | `forge-protocol init --skynet` |

## Setup by Project Type

### Rust Projects

```bash
forge-protocol init --type rust --skynet
```

**Generated files:**

```
project/
├── warmup.yaml           # Protocol with Rust quality gates
├── sprint.yaml           # Session boundaries
├── roadmap.yaml          # Milestone planning
├── CLAUDE.md             # Rust-specific commands
├── .gitignore            # Updated with .claude_checkpoint.yaml
└── .cargo-husky/
    └── hooks/
        └── pre-commit    # cargo fmt + clippy + forge-protocol
```

**Quality gates in warmup.yaml:**
```yaml
quality:
  before_commit:
    - "cargo fmt --check"
    - "cargo clippy --all-targets -- -D warnings"
    - "cargo test"
    - "forge-protocol validate"
    - "forge-protocol lint-docs"
```

**CLAUDE.md commands:**
```markdown
## Commands
cargo test                    # Run tests
cargo clippy -- -D warnings   # Lint (must pass)
cargo fmt                     # Format code
cargo build --release         # Release build
```

---

### Python Projects

```bash
forge-protocol init --type python --skynet
```

**Generated files:**

```
project/
├── warmup.yaml           # Protocol with Python quality gates
├── sprint.yaml           # Session boundaries
├── roadmap.yaml          # Milestone planning
├── CLAUDE.md             # Python-specific commands
├── .gitignore            # Updated with .claude_checkpoint.yaml
└── .hooks/
    ├── pre-commit        # ruff + mypy + pytest + forge-protocol
    └── install.sh        # Hook installer
```

**Quality gates in warmup.yaml:**
```yaml
quality:
  before_commit:
    - "ruff check ."
    - "ruff format --check ."
    - "mypy ."
    - "pytest"
    - "forge-protocol validate"
    - "forge-protocol lint-docs"
```

**CLAUDE.md commands:**
```markdown
## Commands
pytest                        # Run tests
ruff check . --fix            # Lint and fix
ruff format .                 # Format code
mypy .                        # Type check
pip install -e .              # Install locally
```

---

### Node.js Projects

```bash
forge-protocol init --type node --skynet
```

**Generated files:**

```
project/
├── warmup.yaml           # Protocol with Node quality gates
├── sprint.yaml           # Session boundaries
├── roadmap.yaml          # Milestone planning
├── CLAUDE.md             # Node-specific commands
├── .gitignore            # Updated with .claude_checkpoint.yaml
└── .husky/
    └── pre-commit        # eslint + prettier + npm test + forge-protocol
```

**Quality gates in warmup.yaml:**
```yaml
quality:
  before_commit:
    - "npm run lint"
    - "npm run format:check"
    - "npm test"
    - "forge-protocol validate"
    - "forge-protocol lint-docs"
```

**CLAUDE.md commands:**
```markdown
## Commands
npm test                      # Run tests
npm run lint                  # ESLint
npm run format                # Prettier
npm run build                 # Build
npm publish                   # Publish to npm
```

---

### Flutter Projects

```bash
forge-protocol init --type flutter --skynet
```

**Generated files:**

```
project/
├── warmup.yaml           # Protocol with Flutter quality gates
├── sprint.yaml           # Session boundaries
├── roadmap.yaml          # Milestone planning
├── CLAUDE.md             # Flutter-specific commands
├── .gitignore            # Updated with .claude_checkpoint.yaml
└── .hooks/
    ├── pre-commit        # dart format + analyze + test + forge-protocol
    └── install.sh        # Hook installer
```

**Quality gates in warmup.yaml:**
```yaml
quality:
  before_commit:
    - "dart format --set-exit-if-changed lib/ test/"
    - "dart analyze lib/"
    - "flutter test"
    - "forge-protocol validate"
    - "forge-protocol lint-docs"
```

**CLAUDE.md commands:**
```markdown
## Commands
flutter test                  # Run tests
dart analyze lib/             # Analyze (must pass)
dart format lib/ test/        # Format code
flutter build apk             # Build Android
flutter build ios             # Build iOS
```

---

### Go Projects

```bash
forge-protocol init --type go --skynet
```

**Generated files:**

```
project/
├── warmup.yaml           # Protocol with Go quality gates
├── sprint.yaml           # Session boundaries
├── roadmap.yaml          # Milestone planning
├── CLAUDE.md             # Go-specific commands
├── .gitignore            # Updated with .claude_checkpoint.yaml
└── .hooks/
    ├── pre-commit        # go fmt + golangci-lint + go test + forge-protocol
    └── install.sh        # Hook installer
```

**Quality gates in warmup.yaml:**
```yaml
quality:
  before_commit:
    - "go fmt ./..."
    - "golangci-lint run"
    - "go test ./..."
    - "forge-protocol validate"
    - "forge-protocol lint-docs"
```

**CLAUDE.md commands:**
```markdown
## Commands
go test ./...                 # Run tests
golangci-lint run             # Lint (must pass)
go fmt ./...                  # Format code
go build -o bin/app           # Build
```

---

### Documentation Projects

```bash
forge-protocol init --type docs --skynet
```

**Generated files:**

```
project/
├── warmup.yaml           # Protocol with docs quality gates
├── sprint.yaml           # Session boundaries
├── roadmap.yaml          # Milestone planning
├── CLAUDE.md             # Docs-specific commands
├── .gitignore            # Updated with .claude_checkpoint.yaml
└── .hooks/
    ├── pre-commit        # markdownlint + forge-protocol lint-docs
    └── install.sh        # Hook installer
```

**Quality gates in warmup.yaml:**
```yaml
quality:
  before_commit:
    - "forge-protocol lint-docs ."
    - "markdownlint '**/*.md'"
    - "forge-protocol validate"
```

**CLAUDE.md commands:**
```markdown
## Commands
forge-protocol lint-docs .           # Check markdown
forge-protocol lint-docs --fix .     # Fix markdown
markdownlint '**/*.md'               # Standard lint
```

---

## Manual Setup Checklist

If you prefer manual setup or need to add SKYNET MODE to an existing project:

### 1. Create warmup.yaml

```bash
forge-protocol init --type <your-type>
```

### 2. Create CLAUDE.md

```markdown
# Project Name

## CRITICAL: Self-Healing Protocol

After ANY compaction or confusion, RE-READ:
1. `warmup.yaml` - Full protocol and rules
2. `.claude_checkpoint.yaml` - Session state (if exists)

## Mandatory Checkpoints

- **Every 2 hours**: Write checkpoint, re-read warmup.yaml
- **Before commit**: Re-read quality gates
- **When confused**: STOP → re-read → resume

## Core Rules

- 4hr MAX session, 1 milestone, NO scope creep
- Tests pass + ZERO warnings → then commit
- Done > Perfect. Ship it.

## Commands

<your language-specific commands here>

## Key Files

- `warmup.yaml` - Full protocol (RE-READ after compact)
- `src/` - Source code
- `tests/` - Test files
```

### 3. Set Up Pre-commit Hooks

**For Rust (cargo-husky):**
```bash
# Add to Cargo.toml
[dev-dependencies]
cargo-husky = { version = "1", features = ["precommit-hook", "run-cargo-clippy", "run-cargo-fmt"] }

# Run once to install
cargo test
```

**For other languages:**
```bash
# Create hooks directory
mkdir -p .hooks

# Create pre-commit hook
cat > .hooks/pre-commit << 'EOF'
#!/bin/bash
set -e

# Your language-specific checks here
# ...

# Forge Protocol checks
if command -v forge-protocol &> /dev/null; then
    forge-protocol validate . || true
    forge-protocol lint-docs . || exit 1
fi

echo "Pre-commit checks passed!"
EOF

chmod +x .hooks/pre-commit

# Create installer
cat > .hooks/install.sh << 'EOF'
#!/bin/bash
cp .hooks/pre-commit .git/hooks/pre-commit
chmod +x .git/hooks/pre-commit
echo "Hooks installed!"
EOF

chmod +x .hooks/install.sh

# Install
./.hooks/install.sh
```

### 4. Update .gitignore

```bash
echo ".claude_checkpoint.yaml" >> .gitignore
```

### 5. Verify Setup

```bash
# Check all files exist
ls -la warmup.yaml CLAUDE.md .hooks/pre-commit 2>/dev/null || ls -la warmup.yaml CLAUDE.md .cargo-husky/hooks/pre-commit

# Validate protocol
forge-protocol validate

# Test pre-commit
git commit --allow-empty -m "test" --dry-run
```

## Launching SKYNET MODE

Once setup is complete:

```bash
# Launch Claude Code in autonomous mode
claude --dangerously-skip-permissions

# Start session
> run warmup

# Claude loads everything, presents milestone
# You confirm:
> punch it

# Go grab coffee. Come back to a release.
```

## Troubleshooting

### "CLAUDE.md not found"
```bash
forge-protocol init --type <your-type> --skynet
# or create manually (see checklist above)
```

### "Pre-commit hooks not running"
```bash
# Check hooks are installed
ls -la .git/hooks/pre-commit

# Reinstall
./.hooks/install.sh
# or for Rust: cargo test
```

### "Self-healing not working"
1. Check CLAUDE.md has self-healing section
2. Check warmup.yaml has self_healing section
3. Re-read both files: `cat CLAUDE.md warmup.yaml`

### "AI forgets rules after compaction"
This is the self-healing trigger. Say:
```
Re-read warmup.yaml and .claude_checkpoint.yaml
```

## Summary

| What | Command |
|------|---------|
| Full setup | `forge-protocol init --type X --skynet` |
| Protocol only | `forge-protocol init --type X --full` |
| Validate | `forge-protocol validate` |
| Lint docs | `forge-protocol lint-docs` |
| Launch | `claude --dangerously-skip-permissions` |
| Start | `run warmup` → `punch it` |
