# FRESHNESS.YAML - Date-Aware Search Protocol
# Stale data ≠ hallucination. Search for truth.
# https://github.com/royalbit/asimov

# CORE PRINCIPLE
core_principle:
  status: "REQUIRED"
  insight: "Stale data is not hallucination. Different problem, different solution."

  distinction:
    hallucination:
      what: "AI generates plausible fiction"
      solution: "Better training, grounding mechanisms"
    stale_data:
      what: "AI gives correct-but-outdated facts"
      solution: "Web search for current information"

  user_perception: |
    Users discover outdated info and conclude "AI hallucinated."
    This misattribution matters because it leads to wrong solutions.
    You can't train away staleness. You search for freshness.

# MODEL CUTOFF (Claude)
model_cutoffs:
  claude:
    opus_4_5: "2025-01"
    sonnet_4_5: "2025-01"
  note: "Months since cutoff = staleness risk. >3 months = high risk."

# ALWAYS SEARCH
always_search:
  description: "If query contains these patterns, ALWAYS use web search"

  temporal_keywords:
    - "current"
    - "latest"
    - "newest"
    - "recent"
    - "today"
    - "this week"
    - "this month"
    - "this year"
    - "2025"  # Any year after cutoff
    - "2026"
    - "now"
    - "updated"
    - "new version"

  volatile_topics:
    - "version"
    - "release"
    - "pricing"
    - "cost"
    - "API endpoint"
    - "documentation"
    - "CEO"
    - "leadership"
    - "stock price"
    - "exchange rate"
    - "news"
    - "announced"
    - "launched"
    - "deprecated"
    - "breaking change"

# VOLATILE DOMAINS
volatile_domains:
  description: "Topics in these domains are likely stale after 3+ months"

  high_volatility:
    - "cryptocurrency"
    - "AI/ML libraries"
    - "cloud provider APIs"
    - "social media platforms"
    - "startup companies"
    - "SaaS products"
    - "mobile app APIs"
    - "web frameworks"

  medium_volatility:
    - "regulations"
    - "tax law"
    - "political"
    - "corporate structure"
    - "pricing plans"
    - "product features"

  low_volatility:
    - "mathematics"
    - "physics"
    - "history (pre-cutoff)"
    - "classical literature"
    - "established standards"

# BEHAVIOR
behavior:
  when_search_available:
    action: "Use WebSearch tool for time-sensitive queries"
    priority: "Search BEFORE answering from training data"
    rationale: "Current info > confident stale info"

  when_search_unavailable:
    action: "Disclose staleness risk"
    template: |
      ⚠️ **Freshness Warning:** My knowledge cutoff is [CUTOFF_DATE].
      This information may be outdated. Please verify from official sources.

  decision_tree:
    - "Check if query contains always_search keywords"
    - "Check if topic is in volatile_domains"
    - "Calculate months since cutoff"
    - "If months > 3 AND volatile domain → SEARCH"
    - "If always_search keyword present → SEARCH"
    - "When in doubt → SEARCH"

# SESSION INTEGRATION
session_integration:
  on_session_start:
    - "Note today's date from <env> block"
    - "Calculate months since model cutoff"
    - "If > 3 months, enable aggressive freshness mode"

  claude_md_directive: |
    FRESHNESS: My cutoff is Jan 2025. Check <env> for today's date.
    For time-sensitive topics (versions, pricing, APIs, news), SEARCH FIRST.

# VALIDATION
validation:
  cli_command: "asimov validate"
  checks:
    - "freshness.yaml exists"
    - "model_cutoffs section exists"
    - "always_search section exists"
    - "behavior section exists"
  warn_on:
    - "model_cutoffs older than 6 months"
    - "Missing volatile_domains"

# INACTION PRINCIPLE (ADR-023)
inaction_principle:
  status: "IMPLEMENTS"
  reference: "first_law.allow_no_harm_through_inaction"
  adr: "docs/adr/023-inaction-principle.md"

  how_this_protocol_complies:
    disclosure:
      requirement: "Disclose known limitations that could cause harm"
      implementation: "behavior.when_search_unavailable warns users of staleness"

    proactive_prevention:
      requirement: "Take action to prevent foreseeable harm"
      implementation: "always_search keywords trigger automatic search"

    transparency_over_convenience:
      requirement: "Accurate slow > fast wrong"
      implementation: "Search before answering, even if slower"

  first_law_violations_prevented:
    - "Giving stale data without disclosure"
    - "Not searching when topic is likely outdated"
    - "Prioritizing speed over accuracy"

# WHY THIS MATTERS
why_this_matters:
  user_trust: "Users lose trust when AI gives outdated info confidently"
  correct_diagnosis: "Knowing it's staleness (not hallucination) leads to right fix"
  vendor_accountability: "Makes vendor cost-optimization visible"
  protocol_solution: "Explicit rules > hoping AI figures it out"
  first_law_compliance: "Prevents harm through inaction (ADR-023)"

motto: "Stale data is not hallucination. Search for truth."
